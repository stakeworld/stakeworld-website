<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Blog | STAKEWORLD</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.stakeworld.io/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | STAKEWORLD"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.stakeworld.io/blog"><link data-rh="true" rel="alternate" href="https://www.stakeworld.io/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.stakeworld.io/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="STAKEWORLD RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="STAKEWORLD Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y6WZJWKT31"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Y6WZJWKT31",{})</script>




<script src="https://gn3bcsr3tsg9.statuspage.io/embed/script.js" async></script><link rel="stylesheet" href="/assets/css/styles.5eda638d.css">
<link rel="preload" href="/assets/js/runtime~main.c4a6af54.js" as="script">
<link rel="preload" href="/assets/js/main.e941593e.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f5f7bc" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like STAKEWORLD, nominate it on <a target="_blank" rel="noopener noreferrer" href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fksm-rpc.stakeworld.io&filter=stakeworld">Kusama</a> or <a target="_blank" rel="noopener noreferrer" href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fdot-rpc.stakeworld.io&filter=stakeworld">Polkadot</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sw.png" alt="STAKEWORLD" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/sw.png" alt="STAKEWORLD" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">STAKEWORLD</b></a><a class="navbar__item navbar__link" href="/docs/snapshot">Snapshots</a><a class="navbar__item navbar__link" href="/docs/rpc">Public RPC</a><a class="navbar__item navbar__link" href="/docs/validate">Setting up a node</a><a class="navbar__item navbar__link" href="/docs/monitor">Monitoring a node</a><a class="navbar__item navbar__link" href="/docs/tools">Linux tips</a><a class="navbar__item navbar__link" href="/docs/links">Links</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" docid="nominate">Nominate</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/nominate">Nominate</a></li><li><a href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fdot-rpc.stakeworld.io&amp;filter=stakeworld" target="_blank" rel="noopener noreferrer" class="dropdown__link button button--group">on Polkadot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fksm-rpc.stakeworld.io&amp;filter=stakeworld" target="_blank" rel="noopener noreferrer" class="dropdown__link button button--group">on Kusama<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/docs/pool">Pool</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://stakeworld.statuspage.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/stakeworld" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/RPC node setup">RPC node setup</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/RPC node setup">RPC node setup</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-12-09T10:09:44.000Z" itemprop="datePublished">December 9, 2022</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/stakeworld" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/stakeworld.png" alt="Stakeworld"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/stakeworld" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Stakeworld</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of Stakeworld</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rpc-node-setup">RPC node setup<a class="hash-link" href="#rpc-node-setup" title="Direct link to heading">​</a></h2><p>Stakeworld has recently setup public rpc nodes for polkadot and kusama, which will hopefully soon be included in the polkadot.js UI. Below some of the lessons learned in the process that might be interesting for others.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="secure-websocket">Secure Websocket<a class="hash-link" href="#secure-websocket" title="Direct link to heading">​</a></h2><p>To access the polkadot, kusama and parachains network we need some kind of entry in the network. This can be achieved by <a href="/docs/validate">setting up a node</a> which has sa RPC server and allowing access to that RPC server via a secure websocket (wss) port. The default setup already exposes a non secure ws socket on port 9944, but for a more usable situation we need a secure websocket which is accesible through a public port.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="archive-node-vs-pruned-node">Archive node vs pruned node<a class="hash-link" href="#archive-node-vs-pruned-node" title="Direct link to heading">​</a></h3><p>A pruned node knows only the recent information about the network and not its full history. Most frequently done actions can be done with a pruned node, for example see account balances, make transfers, setup session keys, staking, etc. An archive node has the full history (database) of the network a can be queried in all kind of ways, give information about transfers since the network started, historical balances, advances queries about past events, etc. </p><p>An archive node requires a lot more diskspace (see <!-- -->[the snapshot page]<!-- -->(docs/snapshots] for pruned and archive db sizes). Inclusion in the Polkadot.js UI requires an archive node. For an archive node you need the options <code>--state-pruning archive --blocks-pruning archive</code> in your startup settings. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-the-rpc-server">Secure the RPC server<a class="hash-link" href="#secure-the-rpc-server" title="Direct link to heading">​</a></h3><p>You can choose <strong>what</strong> to expose with <strong>how many</strong> connections <strong>from where</strong> through your rpc server.</p><p><em>How many</em>: You can set your maximum connections throug <code>--ws-max-connections</code>, for example <code>--ws-max-connections 100</code></p><p><em>From where</em>: by default localhost and the polkadot.js are allowed to access the RPC server, you can change this by setting <code>--rpc-cors</code>, to allow access from everywhere you need <code>--rpc-cors all</code></p><p><em>What:</em>: you can limit the methods to use with <code>--rpc-methods</code>, an easy way to set this to a safe mode is <code>--rpc-methods Safe</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-the-ws-port">Secure the ws port<a class="hash-link" href="#secure-the-ws-port" title="Direct link to heading">​</a></h3><p>The ws port is a way to access the RPC server and preferably when exposed from the outside is secured with a SSL certificate.</p><p>The <a href="https://wiki.polkadot.network/docs/maintain-wss" target="_blank" rel="noopener noreferrer">polkadot wiki</a> already covers a lot of information about this, especially in relation to setting it up in a nginx configuration. I&#x27;ve focussed more on a apache2 but principles are the same. The main principle in converting the non secure ws port to a secure wss port is putting in behind a proxy. So from outside one see&#x27;s the SSL enabled apache2/nginx/other proxy server, witch redirect the request to the internal node.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-apache2-for-proxying">Using apache2 for proxying<a class="hash-link" href="#using-apache2-for-proxying" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stress-testing-your-server">Stress testing your server<a class="hash-link" href="#stress-testing-your-server" title="Direct link to heading">​</a></h3></div><footer class="row docusaurus-mt-lg"></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">STAKEWORLD</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/snapshot">Snapshots</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/rpc">RPC</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/validate">Validate</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/nominate">Nominate</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/links">Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools">Linux tips</a></li></ul></div><div class="col footer__col"><div class="footer__title">Kusama/Polkadot</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polkadot wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://polkadot.js.org/apps/?rpc=wss://dot-rpc.stakeworld.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polkadot.js<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:info@stakeworld.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">info@stakeworld.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/stakeworld" target="_blank" rel="noopener noreferrer" class="footer__link-item">github.com/stakeworld<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://app.element.io/#/user%2F%40stakeworld%3Amatrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">@stakeworld.matrix.org<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 STAKEWORLD</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c4a6af54.js"></script>
<script src="/assets/js/main.e941593e.js"></script>
</body>
</html>