<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://www.stakeworld.io/blog</id>
    <title>STAKEWORLD Blog</title>
    <updated>2022-12-09T10:09:44.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://www.stakeworld.io/blog"/>
    <subtitle>STAKEWORLD Blog</subtitle>
    <icon>https://www.stakeworld.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[RPC node setup]]></title>
        <id>RPC node setup</id>
        <link href="https://www.stakeworld.io/blog/RPC node setup"/>
        <updated>2022-12-09T10:09:44.000Z</updated>
        <summary type="html"><![CDATA[RPC node setup]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rpc-node-setup">RPC node setup<a class="hash-link" href="#rpc-node-setup" title="Direct link to heading">​</a></h2><p>Stakeworld has recently setup public rpc nodes for polkadot and kusama, which will hopefully soon be included in the polkadot.js UI. Below some of the lessons learned in the process that might be interesting for others.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="secure-websocket">Secure Websocket<a class="hash-link" href="#secure-websocket" title="Direct link to heading">​</a></h2><p>To access the polkadot, kusama and parachains network we need some kind of entry in the network. This can be achieved by <a href="/blog/docs/validate">setting up a node</a> which has sa RPC server and allowing access to that RPC server via a secure websocket (wss) port. The default setup already exposes a non secure ws socket on port 9944, but for a more usable situation we need a secure websocket which is accesible through a public port.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="archive-node-vs-pruned-node">Archive node vs pruned node<a class="hash-link" href="#archive-node-vs-pruned-node" title="Direct link to heading">​</a></h3><p>A pruned node knows only the recent information about the network and not its full history. Most frequently done actions can be done with a pruned node, for example see account balances, make transfers, setup session keys, staking, etc. An archive node has the full history (database) of the network a can be queried in all kind of ways, give information about transfers since the network started, historical balances, advances queries about past events, etc. </p><p>An archive node requires a lot more diskspace (see <!-- -->[the snapshot page]<!-- -->(docs/snapshots] for pruned and archive db sizes). Inclusion in the Polkadot.js UI requires an archive node. For an archive node you need the options <code>--state-pruning archive --blocks-pruning archive</code> in your startup settings. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-the-rpc-server">Secure the RPC server<a class="hash-link" href="#secure-the-rpc-server" title="Direct link to heading">​</a></h3><p>You can choose <strong>what</strong> to expose with <strong>how many</strong> connections <strong>from where</strong> through your rpc server.</p><p><em>How many</em>: You can set your maximum connections throug <code>--ws-max-connections</code>, for example <code>--ws-max-connections 100</code></p><p><em>From where</em>: by default localhost and the polkadot.js are allowed to access the RPC server, you can change this by setting <code>--rpc-cors</code>, to allow access from everywhere you need <code>--rpc-cors all</code></p><p><em>What:</em>: you can limit the methods to use with <code>--rpc-methods</code>, an easy way to set this to a safe mode is <code>--rpc-methods Safe</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-the-ws-port">Secure the ws port<a class="hash-link" href="#secure-the-ws-port" title="Direct link to heading">​</a></h3><p>The ws port is a way to access the RPC server and preferably when exposed from the outside is secured with a SSL certificate.</p><p>The <a href="https://wiki.polkadot.network/docs/maintain-wss" target="_blank" rel="noopener noreferrer">polkadot wiki</a> already covers a lot of information about this, especially in relation to setting it up in a nginx configuration. I've focussed more on a apache2 but principles are the same. The main principle in converting the non secure ws port to a secure wss port is putting in behind a proxy. So from outside one see's the SSL enabled apache2/nginx/other proxy server, witch redirect the request to the internal node.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-apache2-for-proxying">Using apache2 for proxying<a class="hash-link" href="#using-apache2-for-proxying" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stress-testing-your-server">Stress testing your server<a class="hash-link" href="#stress-testing-your-server" title="Direct link to heading">​</a></h3>]]></content>
        <author>
            <name>Stakeworld</name>
            <uri>https://github.com/stakeworld</uri>
        </author>
    </entry>
</feed>