<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rpc">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">RPC node | STAKEWORLD</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.stakeworld.io/docs/rpc"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RPC node | STAKEWORLD"><meta data-rh="true" name="description" content="Public RPC server of STAKEWORLD"><meta data-rh="true" property="og:description" content="Public RPC server of STAKEWORLD"><meta data-rh="true" name="keywords" content="rpc,wss,ws,polkadot.js,validator,polkadot,kusama"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.stakeworld.io/docs/rpc"><link data-rh="true" rel="alternate" href="https://www.stakeworld.io/docs/rpc" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.stakeworld.io/docs/rpc" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="STAKEWORLD RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="STAKEWORLD Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y6WZJWKT31"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Y6WZJWKT31",{})</script>




<script src="https://gn3bcsr3tsg9.statuspage.io/embed/script.js" async></script><link rel="stylesheet" href="/assets/css/styles.5eda638d.css">
<link rel="preload" href="/assets/js/runtime~main.e6c49d7b.js" as="script">
<link rel="preload" href="/assets/js/main.12aff926.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f5f7bc" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like STAKEWORLD, nominate it on <a target="_blank" rel="noopener noreferrer" href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fksm-rpc.stakeworld.io&filter=stakeworld">Kusama</a> or <a target="_blank" rel="noopener noreferrer" href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fdot-rpc.stakeworld.io&filter=stakeworld">Polkadot</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sw.png" alt="STAKEWORLD" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/sw.png" alt="STAKEWORLD" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">STAKEWORLD</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/snapshot">Snapshots</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/rpc">Public RPC</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/validate">Setting up a node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/monitor">Monitoring a node</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tools">Linux tips</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/links">Links</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" docid="nominate">Nominate</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/nominate">Nominate</a></li><li><a href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fdot-rpc.stakeworld.io&amp;filter=stakeworld" target="_blank" rel="noopener noreferrer" class="dropdown__link button button--group">on Polkadot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://polkadot.js.org/apps/#/staking/targets?rpc=wss%3A%2F%2Fksm-rpc.stakeworld.io&amp;filter=stakeworld" target="_blank" rel="noopener noreferrer" class="dropdown__link button button--group">on Kusama<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/pool">Pool</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://stakeworld.statuspage.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/stakeworld" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nominate">Nominate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pool">Pool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/snapshot">Snapshot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/rpc">RPC node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tools">Linux tips</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/validate">Validate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validate&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RPC node</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RPC node</h1></header><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>RPC servers allow access into the polkadot/kusama ecosystem. Stakeworld runs two public, multi location, load balanced archive RPC servers; <a href="https://polkadot.js.org/apps/?rpc=wss://dot-rpc.stakeworld.io" target="_blank" rel="noopener noreferrer">dot-rpc.stakeworld.io</a> and <a href="https://polkadot.js.org/apps/?rpc=wss://ksm-rpc.stakeworld.io" target="_blank" rel="noopener noreferrer">ksm-rpc.stakeworld.io</a>  </p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-own-secure-rpc-server">Setting up your own secure RPC server<a class="hash-link" href="#setting-up-your-own-secure-rpc-server" title="Direct link to heading">​</a></h2><p>To access the polkadot, kusama and parachains networks we need some kind of access into the network. This can be achieved by <a href="/docs/validate">setting up a node</a> with a RPC server and allowing access to that RPC server via a secure websocket (wss) port. The default node setup already exposes a non secure ws socket on port 9944 (which can optionally be changed by the &#x27;--ws-port` parameter), but for a more usable situation we need a secure websocket which is accesible through a public port.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="archive-node-vs-pruned-node">Archive node vs pruned node<a class="hash-link" href="#archive-node-vs-pruned-node" title="Direct link to heading">​</a></h3><p>A pruned node knows only the recent information about the network and not its full history. Most frequently done actions can be done with a pruned node, for example see account balances, make transfers, setup session keys, staking, etc. An archive node has the full history (database) of the network a can be queried in all kind of ways, give information about transfers since the network started, historical balances, advanced queries about past events, etc. </p><p>An archive node requires a lot more <a href="/docs/snapshot">diskspace</a>.  For an archive node you need the options <code>--state-pruning archive --blocks-pruning archive</code> in your startup settings.
<img loading="lazy" alt="snapsize" src="data:image/png;base64,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" width="800" height="300" class="img_ev3q"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Inclusion in the Polkadot.js UI requires an archive node.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-the-rpc-server">Secure the RPC server<a class="hash-link" href="#secure-the-rpc-server" title="Direct link to heading">​</a></h3><p>Via the node startup settings you can choose <strong>what</strong> to expose with <strong>how many</strong> connections <strong>from where</strong> through your rpc server.</p><p><em>How many</em>: You can set your maximum connections through <code>--ws-max-connections</code>, for example <code>--ws-max-connections 100</code></p><p><em>From where</em>: by default localhost and the polkadot.js are allowed to access the RPC server, you can change this by setting <code>--rpc-cors</code>, to allow access from everywhere you need <code>--rpc-cors all</code></p><p><em>What:</em>: you can limit the methods to use with <code>--rpc-methods</code>, an easy way to set this to a safe mode is <code>--rpc-methods Safe</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-the-ws-port">Secure the ws port<a class="hash-link" href="#secure-the-ws-port" title="Direct link to heading">​</a></h3><p>The ws port is a way to access the RPC server is preferably exposed from the outside as a wss port and secured with a SSL certificate.</p><p>The <a href="https://wiki.polkadot.network/docs/maintain-wss" target="_blank" rel="noopener noreferrer">maintain wss</a> on the wiki already covers a lot of information about this, especially in relation to setting it up in a nginx configuration. This page is focussed more on a apache2 but principles are the same. The main idea is converting the non secure ws port to a secure wss port by putting it behind a proxy. So from outside one see&#x27;s the SSL enabled apache2/nginx/other proxy server, witch redirect the request to the internal rpc node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-apache2-for-proxying">Using apache2 for proxying<a class="hash-link" href="#using-apache2-for-proxying" title="Direct link to heading">​</a></h3><p>Apache2 is a little heavier then nginx but also has some more tweaking posibilities. You can run it in different modes, prefork, worker or event. We chose <a href="https://httpd.apache.org/docs/2.4/mod/event.html" target="_blank" rel="noopener noreferrer">event</a> since this seems best suited for high load enviroments. Downside is that you can&#x27;t use the default php module and need to enable it via php-fm. The proxy_wstunnel module works out of the box. </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> apache2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a2dismod mpm_prefork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a2enmod mpm_event proxy proxy_html proxy_http proxy_wstunnel rewrite ssl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to enable php</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apt install php-fpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a2enmod proxy_fcgi setenvif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-ssl-through-letsencrypt">Enabling ssl through letsencrypt<a class="hash-link" href="#enabling-ssl-through-letsencrypt" title="Direct link to heading">​</a></h4><p>There are multiple options for getting a ssl certificate, one popular (and free) being letsencrypt. There are multiple ways of obtaining a letsencrypt certificate, a popular being certbot but we are using <a href="https://go-acme.github.io/lego/dns/" target="_blank" rel="noopener noreferrer">lego</a> which has more dns provider option.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-the-proxy-to-the-apache2-config">Add the proxy to the apache2 config<a class="hash-link" href="#add-the-proxy-to-the-apache2-config" title="Direct link to heading">​</a></h4><p>In a virtualhost add:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        SSLCertificateFile &lt;cert.crt&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLCertificateKeyFile &lt;cert.key&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SSLProxyEngine on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ProxyRequests off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ProxyPass / ws://localhost:9944</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ProxyPassReverse / ws://localhost:9944</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tweaking-connections">Tweaking connections<a class="hash-link" href="#tweaking-connections" title="Direct link to heading">​</a></h4><p>The number of connections is limited by the node itself (<code>--ws-max-connections</code>) but also by the the number of threads available on the proxy server. For apache2 this can be tweaked by editing <code>/etc/apache2/mods-enabled/mpm_event.conf</code></p><p>We are using: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    StartServers         4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MinSpareThreads      25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxSpareThreads      75</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ThreadLimit      128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ThreadsPerChild      128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxRequestWorkers    896</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MaxConnectionsPerChild   0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rate-limiting">Rate limiting<a class="hash-link" href="#rate-limiting" title="Direct link to heading">​</a></h4><p>Theoretically one client could use all connections/resources, draining the resources of the server and making it inaccessible. This can be countered by rate limiting the connections, for example by using mod_qos:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> libapache2-mod-qos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a2enmod qos</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And edit <code>/etc/apache2/mods-available/qos.conf</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # allows max 50 connections from a single ip address:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QS_SrvMaxConnPerIP                                 50</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Be carefull when running behind load balancing server (for example cloudflare) because the the load balancer will only use a few ip&#x27;s and thus can trigger the rate limit, better to use the rate limit options from the load balancer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stress-testing-your-rpc-server">Stress testing your RPC server<a class="hash-link" href="#stress-testing-your-rpc-server" title="Direct link to heading">​</a></h3><p>You can test basic usage by accessing your server through the polkadot.js UI as a custom endpoint. For example staking target display is RPC intensive and can give you an indication of performance. </p><p>There are also more dedicated stress testing solutions, we have forked the <a href="https://github.com/dwellir-public/artillery-engine-substrate" target="_blank" rel="noopener noreferrer">Dwellir repository</a> for our testing.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --lts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -g </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> global </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> artillery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> global </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> artillery-engine-substrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /opt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:stakeworld/stakeworld-rpc-artillery.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /opt/stakeworld-rpc-artillery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./run.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the <code>run.sh</code> you can edit some variables like how many connections per second, the wss node, etc. The following is a test run for 10 seconds with 10 connections per second and maximum 20 concurrent users. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  target: &quot;wss://ksm-rpc.stakeworld.io&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  processor: &quot;./functions.js&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  phases:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - duration: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      arrivalRate: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maxVusers: 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After this you get some info about the run and a report is created, which can be used for further diagnostics</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Summary report @ 23:38:40(+0100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.completed: .............................................................. 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.created: ................................................................ 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.created_by_name.balance: ................................................ 35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.created_by_name.complex_call: ........................................... 33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.created_by_name.headers_blocks: ......................................... 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.failed: ................................................................. 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vusers.session_length:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  min: ......................................................................... 231.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  max: ......................................................................... 656.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  median: ...................................................................... 361.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p95: ......................................................................... 518.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p99: ......................................................................... 645.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws.messages_sent: .............................................................. 163</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws.send_rate: .................................................................. 29/sec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Log file: reports/report.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report generated: reports/report.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/stakeworld/website/edit/master/docs/rpc.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/snapshot"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Snapshot</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tools"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Linux tips</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-your-own-secure-rpc-server" class="table-of-contents__link toc-highlight">Setting up your own secure RPC server</a><ul><li><a href="#archive-node-vs-pruned-node" class="table-of-contents__link toc-highlight">Archive node vs pruned node</a></li><li><a href="#secure-the-rpc-server" class="table-of-contents__link toc-highlight">Secure the RPC server</a></li><li><a href="#secure-the-ws-port" class="table-of-contents__link toc-highlight">Secure the ws port</a></li><li><a href="#using-apache2-for-proxying" class="table-of-contents__link toc-highlight">Using apache2 for proxying</a></li><li><a href="#stress-testing-your-rpc-server" class="table-of-contents__link toc-highlight">Stress testing your RPC server</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">STAKEWORLD</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/snapshot">Snapshots</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/rpc">RPC</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/validate">Validate</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/nominate">Nominate</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/links">Resources</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tools">Linux tips</a></li></ul></div><div class="col footer__col"><div class="footer__title">Kusama/Polkadot</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://wiki.polkadot.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polkadot wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://polkadot.js.org/apps/?rpc=wss://dot-rpc.stakeworld.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Polkadot.js<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:info@stakeworld.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">info@stakeworld.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/stakeworld" target="_blank" rel="noopener noreferrer" class="footer__link-item">github.com/stakeworld<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://app.element.io/#/user%2F%40stakeworld%3Amatrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">@stakeworld.matrix.org<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 STAKEWORLD</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e6c49d7b.js"></script>
<script src="/assets/js/main.12aff926.js"></script>
</body>
</html>